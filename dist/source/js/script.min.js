let message=document.querySelector(".todo__input"),addBtn=document.querySelector(".todo__btn"),inputField=document.querySelector(".todo__input-field"),plugText=document.querySelector(".todo__list-plug"),todo=document.querySelector(".todo__list"),deleteList=document.querySelector(".todo__delete-btn"),tracker=document.querySelector(".todo__tracker"),taskInput=document.querySelector('input[type="checkbox"]'),warning=document.createElement("p");addBtn.addEventListener("click",createTask),message.addEventListener("keydown",EnterBtn),todo.addEventListener("click",deleteTask),todo.addEventListener("click",checkInput),todo.addEventListener("click",isTaskCompleate);let todoList=[];function createTask(){if(""!=message.value){let e={text:message.value,checked:!1};todoList.push(e),displayMessages(),addBtn.style.opacity="0.5",plugText.style="display: none"}else emptyInputField(),warning.style.removeProperty("animation")}function displayMessages(){let e="";todoList.forEach((t,n)=>{e+=`\n\n            <li class="todo__item" id="${n}">\n                <label id="item__${n}">\n                    <input type="checkbox" class="input-checkbox" id="item__${n}"></input>\n                    <p class="text">${t.text}</p><span data-action="delete"><img data-action="delete" src="img/bin.svg" alt=""></span>\n                </label>\n            </li>\n        `,todo.innerHTML=e,message.value="",taskTracker()})}function taskTracker(){counter=todoList.length,tracker.innerHTML=`You have ${counter} active task(s)`}
//! Need refactoring
function checkInput(e){e.target.classList.contains("input-checkbox")&&(e.target.hasAttribute("checked")?e.target.removeAttribute("checked"):e.target.setAttribute("checked",""))}function isTaskCompleate(e){checkbox=e.target.closest(".todo__item"),checkbox.classList.toggle("done")}function deleteTask(e){if("delete"!==e.target.dataset.action)return;const t=e.target.closest(".todo__item"),n=Number(t.id),o=todoList.findIndex(e=>e.id===n);t.style.animation="0.5s fade-out forwards",setTimeout(()=>{todoList.splice(o,1),t.remove(),taskTracker(),0==todoList.length&&(plugText.style="display: block")},600),0==todoList.length&&(plugText.style="display: block")}function emptyInputField(){warning.classList.add("warning"),warning.innerHTML="This field cannot be empty",inputField.appendChild(warning),warning.style.removeProperty("animation"),addBtn.style.opacity="0.5",message.style.border="1px solid #ed3511"}function EnterBtn(e){13===e.keyCode&&createTask()}message.oninput=function(){""==message.value?emptyInputField():(addBtn.style.opacity="1",message.style.border="1px solid rgba(0, 0, 0, 0.075)",warning.style.animation="1s fade-out forwards")},deleteList.addEventListener("click",(function(){todo.style.animation="1s fade-out forwards",setTimeout(()=>{todo.innerHTML="",todoList.length=0,taskTracker(),plugText.style="display: block"},600),todo.removeAttribute("style")}));